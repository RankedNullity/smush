{
  "title": "Migration Smush Filter Configuration",
  "description": "Configuration for filtering SQL queries during migration consolidation",
  "filters": [
    {
      "name": "DROP operations",
      "patterns": [
        "^DROP\\s",
        "DROP\\s+INDEX",
        "DROP\\s+TABLE",
        "DROP\\s+COLUMN",
        "DROP\\s+CONSTRAINT",
        "DROP\\s+SEQUENCE",
        "DROP\\s+TRIGGER",
        "DROP\\s+FUNCTION"
      ],
      "reason": "DROP operations dont need to be in the final composed migration",
      "enabled": true
    },
    {
      "name": "CREATE TABLE operations",
      "patterns": [
        "^CREATE\\s+TABLE"
      ],
      "reason": "CREATE TABLE operations should be generated by schema changes",
      "enabled": true
    },
    {
      "name": "ALTER TABLE column operations", 
      "patterns": [
        "ALTER\\s+TABLE.*ADD\\s+COLUMN",
        "ALTER\\s+TABLE.*DROP\\s+COLUMN",
        "ALTER\\s+TABLE.*RENAME\\s+COLUMN"
      ],
      "reason": "ALTER TABLE ADD/DROP COLUMN operations should be generated by schema changes",
      "enabled": true
    },
    {
      "name": "ALTER TYPE operations",
      "patterns": [
        "^ALTER\\s+TYPE",
        "ALTER\\s+TYPE.*ADD\\s+VALUE",
        "ALTER\\s+TYPE.*RENAME\\s+VALUE"
      ],
      "reason": "ALTER TYPE operations should reflect the most up-to-date type definition from schema",
      "enabled": true
    },

    {
      "name": "Data seeding operations",
      "patterns": [
        "^INSERT\\s+INTO",
        "^UPDATE\\s+.*SET"
      ],
      "reason": "Data seeding should be handled separately from schema migrations",
      "enabled": true
    },
    {
      "name": "Constraint operations",
      "patterns": [
        "ADD\\s+CONSTRAINT",
        "DROP\\s+CONSTRAINT",
        "ALTER\\s+TABLE.*ADD\\s+FOREIGN\\s+KEY"
      ],
      "reason": "Constraint operations should be generated by schema relationship definitions",
      "enabled": false
    },
    {
      "name": "CREATE INDEX operations",
      "patterns": [
        "^CREATE\\s+(?:UNIQUE\\s+)?INDEX"
      ],
      "reason": "CREATE INDEX operations may be custom and should be reviewed",
      "enabled": false
    }
  ]
}
